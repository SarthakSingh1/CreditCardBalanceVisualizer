<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Credit Card Compare Feature</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="button-wrapper">
    <a href="/" class="styled-button">Back to Home</a>
        <h1>Credit Card Compare Feature</h1>
</div>

    <table>
        <tr>
            <th>Original Paramater</th>
            <th>Original Value </th>
        </tr>
        <tr>
            <td>Total Balance</td>
            <td id="totalBalance"></td>
        </tr>
        <tr>
            <td>Annual Percentage Rate</td>
            <td id="apr"></td>
        </tr>
        <tr>
        <td id="maxMonthlyPaymentTable">Max Monthly Payment</td>
            <td id="maxMonthlyPayment"></td>
        </tr>
        <tr>
            <td>Extra Monthly Spend</td>
            <td id="extraMonthlySpend"></td>
        </tr>
    </table>

 <div class="form-container">
    <form id="calculator-form" class="input-form">

        <div class="compare-form-group-second inline">
            <label for="totalBalance">Total Balance of Credit Card:</label>
            <br> <!-- Add line break to move the input to the next line -->
            <span class="currencyinput">$<input type="number" id="totalBalance2" name="totalBalance2" placeholder="Enter Total Balance" step="0.01" value="1000" required>
        <div class="tooltip">
            <span class="question-mark">?</span>
                  <span class="tooltip-text">This is the total amount you currently owe to the credit card issuer (e.g. Synchrony). It can include purchases, fees, and interest charges. You can find this amount by checking your monthly statement. <a href="https://www.investopedia.com/terms/c/credit-card-balance.asp" target="_blank">Learn more</a></span>
        </div>
        </div>

        <!-- Second input for APR -->
        <div class="compare-form-group-second inline">
            <label for="apr">Annual Percentage Rate:</label>
            <br> <!-- Add line break to move the input to the next line -->
            <input type="number" id="apr2" name="apr2" placeholder="Enter APR" step="0.01" min="0" value="15" required>
             <div class="tooltip">
                <span class="question-mark">?</span>
                  <span class="tooltip-text">This is considered your annual interest rate. If you don't pay off your balance in time, you may incur interest at this rate. This can be found in your credit card agreement, your most recent statement, or on the card issuerâ€™s website. <a href="https://www.investopedia.com/terms/a/apr.asp" target="_blank">Learn more</a></span>
            </div>
        </div>

        <!-- Third input for max monthly payment -->
        <div class="compare-form-group-second inline">
        <label for="maxMonthlyPayment" id="maxMonthlyPaymentLabel">Max Monthly Payment/Total Months:</label>
            <br> <!-- Add line break to move the input to the next line -->
            <input type="number" id="maxMonthlyPayment2" name="maxMonthlyPayment2" placeholder="Enter Max Monthly Payment" step="0.01" value="100" required>
            <div class="tooltip">
                <span class="question-mark">?</span>
                <span id="maxMonthlyPaymentTooltip" class="tooltip-text">If you selected max monthly payment this is the maximum amount you can afford to pay towards your credit card balance each month.<a href="https://www.investopedia.com/how-do-credit-card-payments-work-5069924#:~:text=The%20monthly%20payment%20on%20a,will%20vary%20on%20the%20provider" target="_blank">Learn more</a></span>
            </div>
        </div>

        <!-- Fourth input for extra monthly spend -->
        <div class="compare-form-group-second inline">
            <label for="extraMonthlySpend">Extra Monthly Spend:</label>
            <br> <!-- Add line break to move the input to the next line -->
             <span class="currencyinput">$<input type="number" id="extraMonthlySpend2" name="extraMonthlySpend2" placeholder="Enter Extra Monthly Spend" step="0.01" value="0" required>
            <div class="tooltip">
                <span class="question-mark">?</span>
                  <span class="tooltip-text">  Please estimate the amount you expect to spend in future months. This amount will be factored into the monthly payment to ensure you can manage any current debt while also considering any upcoming expenses.<a href="https://www.nerdwallet.com/article/finance/nerdwallet-budget-calculator" target="_blank">Learn more</a></span>
            </div>
        </div>
 
        <div class="button-wrapper">
            <button type="submit" class="styled-button">Submit</button>
        </div>
    

      </form>
  </div>


<div class="tab">
  <button class="tablinks" onclick="openTab(event, 'tab1')">Total interest vs Principal</button>
  <button class="tablinks" onclick="openTab(event, 'tab2')">Monthly Interest Payments</button>
  <button class="tablinks" onclick="openTab(event, 'tab3')">Principal over Time</button>
</div>

<div id="tab1" class="tabcontent">
    <div class="chart-container-1">
    <div class="pie-chart-container-2">
        <canvas id="donutChart1" width="250" height="250"></canvas>
    </div>
    <div class="pie-chart-container-2">
        <canvas id="donutChart2" width="250" height="250"></canvas>
    </div>
    </div>
</div>

<div id="tab2" class="tabcontent">
      <div class="chart-container">
        <div class="line-chart-container">
        <canvas id="interestBarChart1" width="200" height="200"></canvas>
        </div>
        <div class="line-chart-container">
        <canvas id="interestBarChart2" width="200" height="200"></canvas>
        </div>
    </div>
</div>

<div id="tab3" class="tabcontent">
        <div class="chart-container">
        <div class="additional-chart-container">
        <canvas id="basicBarChart1" width="200" height="200"></canvas>
        </div>
        <div class="additional-chart-container">
        <canvas id="basicBarChart2" width="200" height="200"></canvas>
        </div>
    </div>
</div>

<div class="monthsInterestWrapper">
    <div class="monthsInterestContainer">
        <div id="months-to-payoff-container">
            <p id="months-to-payoff-1">Monthly Payment or Months to Payoff:</p>
    <div class="tooltip">
                <span class="question-mark">?</span>
            <span id="monthsToPayoff"   class="tooltip-text">Depending on what you pick this will be different <a href="https://www.transunion.com/blog/debt-management/credit-card-101-paying-the-balance-vs-paying-the-minimum" target="_blank">Learn more</a></span>
    </div>
        </div>
        <div id="total-interest-paid-container">
            <p id="total-interest-paid-1">Total Interest Paid:</p>
                 <div class="tooltip">
                <span class="question-mark">?</span>
            <span class="tooltip-text">This is the total interest you would pay in the timeframe that was calculated or that you selected. <a href="https://www.investopedia.com/articles/01/061301.asp" target="_blank">Learn more</a></span>
    </div>
        </div>
    </div>
    <div class="monthsInterestContainer">
        <div id="months-to-payoff-container">
            <p id="months-to-payoff-2">Monthly Payment or Months to Payoff:</p>
                 <div class="tooltip">
                <span class="question-mark">?</span>
            <span id="monthsToPayoff"   class="tooltip-text">Depending on what you pick this will be different <a href="https://www.transunion.com/blog/debt-management/credit-card-101-paying-the-balance-vs-paying-the-minimum" target="_blank">Learn more</a></span>
    </div>
        </div>
        <div id="total-interest-paid-container">
            <p id="total-interest-paid-2">Total Interest Paid:</p>
                 <div class="tooltip">
                <span class="question-mark">?</span>
            <span class="tooltip-text">This is the total interest you would pay in the timeframe that was calculated or that you selected. <a href="https://www.investopedia.com/articles/01/061301.asp" target="_blank">Learn more</a></span>
    </div>
        </div>
    </div>
</div>


  <!-- Script for Chart.js and your custom JavaScript code -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="renderCompareGraph.js"> </script>
  <script>
    function openTab(evt, tabName) {
    var i, tabcontent, tablinks;
    
    // Hide all tab content
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    
    // Deactivate all tab buttons
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    
    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
    }

    // By default, open the first tab
    document.getElementsByClassName("tablinks")[0].click();


  </script>

   <script>
        // Get query parameters from the URL
        const urlParams = new URLSearchParams(window.location.search);
        const maxMonthlyPaymentLabel = document.getElementById('maxMonthlyPaymentLabel');
        const maxMonthlyPaymentTable = document.getElementById('maxMonthlyPaymentTable');
        const monthsToPayoff1 = document.getElementById('months-to-payoff-1');
        const monthsToPayoff2 = document.getElementById('months-to-payoff-2');
        const monthlyToolTip = document.getElementById('maxMonthlyPaymentTooltip');
        const textNode = monthlyToolTip.childNodes[0];
        var elements = document.querySelectorAll('#monthsToPayoff');

// Iterate over each element and update its content

        // Display parameters in the table
        document.getElementById('totalBalance').textContent = urlParams.get('totalBalance');
        document.getElementById('apr').textContent = urlParams.get('apr');
 
        if (urlParams.get('paymentType') == "totalMonths" ) {
            maxMonthlyPaymentLabel.textContent = "Total Months";
            maxMonthlyPaymentTable.textContent = "Total Months";
            monthsToPayoff1.textContent = "Monthly Payment";
            monthsToPayoff2.textContent = "Monthly Payment";
            textNode.textContent = "Please indicate the number of months in which you want to pay off your balance. Keep in mind that the longer you extend this period, the more interest you will end up paying overall. ";
            elements.forEach(function(element) {
                // Update the content of each element
                element.textContent = "This is the monthly payment needed to pay off your balance in the number of months you selected.";
            });
        } else {
            maxMonthlyPaymentLabel.textContent = "Max Monthly Payment";
            maxMonthlyPaymentTable.textContent = "Max Monthly Payment";
            monthsToPayoff1.textContent = "Months till payoff";
            monthsToPayoff2.textContent = "Months till payoff";
            textNode.textContent = "Please indicate the monthly payment you prefer to contribute towards paying off your balance. Keep in mind that opting for a lower payment will result in higher interest charges and a longer duration to pay off your balance. ";
            elements.forEach(function(element) {
    // Update the content of each element
                element.textContent = "This is the number of months needed to pay off your balance by making monthly payments at the amount you selected";
            });

        }
        
        document.getElementById('maxMonthlyPayment').textContent = urlParams.get('maxMonthlyPayment');
        document.getElementById('extraMonthlySpend').textContent = urlParams.get('extraMonthlySpend');
    </script>
</body>
</html>
